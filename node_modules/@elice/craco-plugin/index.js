"use strict";var e=require("@cloudbeds/webpack-module-federation-types-plugin"),n=require("@elice/chunk-retry-webpack-plugin"),r=require("@sentry/webpack-plugin"),t=require("dotenv-webpack"),o=require("html-webpack-plugin"),i=require("lodash"),a=require("node:path"),l=require("node-polyfill-webpack-plugin"),u=require("webpack"),c=require("webpack-bundle-analyzer"),d=require("webpackbar"),s=require("@craco/craco"),f=require("deepmerge"),p=require("dotenv"),v=require("dotenv-expand"),_=require("node:fs"),g=require("fs-extra"),O=require("image-minimizer-webpack-plugin"),y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function b(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var E={},h={};Object.defineProperty(h,"__esModule",{value:!0});h.IS_ANALYZE=h.IS_DEPLOY=h.IS_VERBOSE=h.ENV=void 0;var m=process.argv,P=function(e){return-1!==m.indexOf("--".concat(e))};h.ENV=function(e){var n=m.indexOf("--".concat(e));return-1===n?"":m[n+1]||""}("mode")||"development",h.IS_VERBOSE=P("verbose"),h.IS_DEPLOY=P("deploy");h.IS_ANALYZE=P("analyze");var D={},w={},j={},M={},A={};!function(e){var n=y&&y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.MODULE_FEDERATION_TYPE_EMIT_DIR=e.MODULE_FEDERATION_TYPE_DIRNAME=e.MODULE_FEDERATION_FILENAME=void 0;var r=n(a);e.MODULE_FEDERATION_FILENAME="remoteEntry.js",e.MODULE_FEDERATION_TYPE_DIRNAME="@types",e.MODULE_FEDERATION_TYPE_EMIT_DIR=r.default.join("static",e.MODULE_FEDERATION_TYPE_DIRNAME)}(A);var I,S,T;I=M,S=y&&y.__createBinding||(Object.create?function(e,n,r,t){void 0===t&&(t=r);var o=Object.getOwnPropertyDescriptor(n,r);o&&!("get"in o?!n.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(e,t,o)}:function(e,n,r,t){void 0===t&&(t=r),e[t]=n[r]}),T=y&&y.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||S(n,e,r)},Object.defineProperty(I,"__esModule",{value:!0}),T(A,I);var N={},C={};Object.defineProperty(C,"__esModule",{value:!0});C.containsBabelCraPreset=void 0;C.containsBabelCraPreset=function(e){var n;return null===(n=e.presets)||void 0===n?void 0:n.some((function(e){return Array.isArray(e)&&"string"==typeof e[0]&&e[0].endsWith("babel-preset-react-app/dependencies.js")}))};var F={},L=y&&y.__read||function(e,n){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var t,o,i=r.call(e),a=[];try{for(;(void 0===n||n-- >0)&&!(t=i.next()).done;)a.push(t.value)}catch(e){o={error:e}}finally{try{t&&!t.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},R=y&&y.__spreadArray||function(e,n,r){if(r||2===arguments.length)for(var t,o=0,i=n.length;o<i;o++)!t&&o in n||(t||(t=Array.prototype.slice.call(n,0,o)),t[o]=n[o]);return e.concat(t||Array.prototype.slice.call(n))},k=y&&y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(F,"__esModule",{value:!0});F.getOneOfAssetModule=F.merge=F.when=void 0;var Y=s,x=k(f);F.when=function(e,n,r){var t;return null!==(t=(0,Y.when)(e,n,r))&&void 0!==t?t:[]},F.merge=function(e,n){return(0,x.default)(e,n,{arrayMerge:function(e,n){return R(R([],L(n),!1),L(e),!1)}})};F.getOneOfAssetModule=function(e,n){var r,t=function(e){var r;return(null===(r=e.oneOf)||void 0===r?void 0:r.findIndex((function(e){return n(e)})))||-1},o=(0,Y.getAssetModule)(e,(function(e){return-1!==t(e)}));if(!o.isFound||!o.match)return o;var i=t(o.match.rule);return{isFound:-1!==i,match:-1!==i?{rule:null===(r=o.match.rule.oneOf)||void 0===r?void 0:r[i],index:i}:void 0}};var U={},q=y&&y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(U,"__esModule",{value:!0});U.dotenv=U.configDotenv=U.resolveDotenvContents=U.resolveDotenvFilepath=U.resolveDotenvFilename=U.resolveEnvMode=void 0;var B=p,J=v,V=q(_),z=q(a),W=h;function H(){switch(W.ENV){case"qa":case"staging":case"production":return W.ENV;default:return"development"}}U.resolveEnvMode=H;function Z(){var e=H(),n=[".env",e&&"development"!==e?e:""].filter(Boolean).join(".");return V.default.existsSync(n)?n:".env"}U.resolveDotenvFilename=Z;function G(e){return void 0===e&&(e=process.cwd()),z.default.join(e,Z())}U.resolveDotenvFilepath=G;U.resolveDotenvContents=function(e){var n;void 0===e&&(e=process.cwd());var r=G(e),t=(0,B.parse)(V.default.readFileSync(r,{encoding:"utf8"}));return null!==(n=(0,J.expand)({parsed:t}).parsed)&&void 0!==n?n:{}};function K(e){void 0===e&&(e=process.cwd());var n=G(e);return(0,J.expand)((0,B.config)({path:n})).parsed}U.configDotenv=K;U.dotenv=K;var Q={},X=y&&y.__assign||function(){return X=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},X.apply(this,arguments)},$=y&&y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Q,"__esModule",{value:!0});Q.resolveFederationJson=Q.resolvePkgJsonProject=Q.resolvePkgJson=void 0;var ee=$(g),ne=$(a),re="package.json";function te(e,n){return ne.default.resolve(e,n)}function oe(e){return ee.default.readJSONSync(te(e,re),{encoding:"utf8",throws:!0})}Q.resolvePkgJson=oe;Q.resolvePkgJsonProject=function(e){var n=oe(e);return X(X({},n),{name:n.name,version:n.version,dependencies:n.dependencies,peerDependencies:n.peerDependencies})};Q.resolveFederationJson=function(e){return ee.default.readJSONSync(te(e,"federation.config.json"),{encoding:"utf8",throws:!1})};var ie={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createPublichPath=e.createFileChunkAssetBaseUrl=e.DEFAULT_CDN_ENDPOINT=void 0,e.DEFAULT_CDN_ENDPOINT="https://cdn-front-door.elice.io",e.createFileChunkAssetBaseUrl=function(n,r){return new URL(n,r||e.DEFAULT_CDN_ENDPOINT).href},e.createPublichPath=function(e){if(e)return"auto"===e||e.endsWith("/")?e:"".concat(e,"/")}}(ie);!function(e){var n=y&&y.__createBinding||(Object.create?function(e,n,r,t){void 0===t&&(t=r);var o=Object.getOwnPropertyDescriptor(n,r);o&&!("get"in o?!n.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(e,t,o)}:function(e,n,r,t){void 0===t&&(t=r),e[t]=n[r]}),r=y&&y.__exportStar||function(e,r){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(r,t)||n(r,e,t)};Object.defineProperty(e,"__esModule",{value:!0}),r(C,e),r(F,e),r(U,e),r(Q,e),r(ie,e)}(N);var ae=y&&y.__assign||function(){return ae=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},ae.apply(this,arguments)},le=y&&y.__read||function(e,n){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var t,o,i=r.call(e),a=[];try{for(;(void 0===n||n-- >0)&&!(t=i.next()).done;)a.push(t.value)}catch(e){o={error:e}}finally{try{t&&!t.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},ue=y&&y.__spreadArray||function(e,n,r){if(r||2===arguments.length)for(var t,o=0,i=n.length;o<i;o++)!t&&o in n||(t||(t=Array.prototype.slice.call(n,0,o)),t[o]=n[o]);return e.concat(t||Array.prototype.slice.call(n))},ce=y&&y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(j,"__esModule",{value:!0});var de=e,se=ce(n),fe=r,pe=ce(t),ve=ce(o),_e=i,ge=ce(a),Oe=ce(l),ye=ce(u),be=c,Ee=ce(d),he=h,me=M,Pe=N,De=(j.default=function(e){var n,r=e.cracoConfig,t=null!==(n=e.pluginOptions.cwd)&&void 0!==n?n:process.cwd(),o=(0,Pe.resolveEnvMode)(),i=(0,Pe.resolveDotenvFilepath)(t),a=(0,Pe.resolvePkgJsonProject)(t),l=(0,Pe.resolveFederationJson)(t);return(0,Pe.merge)(r,{babel:{loaderOptions:function(n){var r,t,o;return(0,Pe.containsBabelCraPreset)(n)||(n.plugins=ue(ue(ue([],le(null!==(r=n.plugins)&&void 0!==r?r:[]),!1),le(null!==(o=null===(t=e.pluginOptions.babel)||void 0===t?void 0:t.plugins)&&void 0!==o?o:[]),!1),[["@babel/plugin-proposal-private-property-in-object",{loose:!0}],["@emotion",{sourceMap:!he.IS_DEPLOY,autoLabel:he.IS_DEPLOY?"never":"always",cssPropOptimization:!0}],["babel-plugin-styled-components",{displayName:!he.IS_DEPLOY,minify:he.IS_DEPLOY}]],!1)),n}},eslint:{mode:"file"},webpack:{alias:{src:ge.default.resolve(t,"src"),assets:ge.default.resolve(t,"src","assets")},plugins:{add:ue(ue(ue(ue(ue(ue(ue([],le((0,Pe.when)(!he.IS_DEPLOY,(function(){var n,r;return[new ve.default({inject:!0,template:null!==(r=null===(n=e.context.paths)||void 0===n?void 0:n.appHtml)&&void 0!==r?r:ge.default.join(t,"public","index.html"),publicPath:"/"})]}),[])),!1),[new pe.default({path:i,expand:!0,ignoreStub:!0,silent:!he.IS_VERBOSE}),new ye.default.DefinePlugin({"process.env.REACT_APP_NAME":"'".concat(a.name,"'"),"process.env.REACT_APP_VERSION":"'".concat(a.version,"'")}),new Oe.default({excludeAliases:["console"]})],!1),le((0,Pe.when)(!1!==e.pluginOptions.moduleFederation,(function(){var n,r,t=e.pluginOptions.moduleFederation||{};return[new ye.default.container.ModuleFederationPlugin(ae(ae({},l),{name:(0,_e.snakeCase)(a.name),filename:me.MODULE_FEDERATION_FILENAME,remotes:null===(n=t.remotes)||void 0===n?void 0:n.reduce((function(n,r){var t;return ae(ae({},n),((t={})["@elice/".concat((0,_e.kebabCase)(r.name))]=["elice_".concat((0,_e.snakeCase)(r.name)),function(){var n,t=new URL(he.IS_DEPLOY?(0,Pe.createFileChunkAssetBaseUrl)(r.cdnProjectRoot,null===(n=e.pluginOptions.cdn)||void 0===n?void 0:n.endpoint):r.endpoint);return t.pathname=ge.default.join(t.pathname,me.MODULE_FEDERATION_FILENAME),t.href}()].join("@"),t))}),{}),shared:Object.entries(null!==(r=a.peerDependencies)&&void 0!==r?r:{}).reduce((function(e,n){var r,t=le(n,2),o=t[0],i=t[1];return ae(ae({},e),((r={})[o]=ae({singleton:!0,strictVersion:!0,requiredVersion:i},(0,Pe.when)("*"===i,(function(){return{version:"0.0.0"}}),{})),r))}),{})}))]}),[])),!1),le((0,Pe.when)(!1!==e.pluginOptions.moduleFederation,(function(){var n,r=e.pluginOptions.moduleFederation||{};return[new de.ModuleFederationTypesPlugin({disableDownladingRemoteTypes:"development"!==o||he.IS_DEPLOY,disableTypeCompilation:"development"!==o||he.IS_DEPLOY,dirEmittedTypes:me.MODULE_FEDERATION_TYPE_EMIT_DIR,remoteEntryUrls:null===(n=r.remotes)||void 0===n?void 0:n.reduce((function(n,r){var t,o;return ae(ae({},n),((t={})["@elice/".concat(r.name)]=he.IS_DEPLOY?(0,Pe.createFileChunkAssetBaseUrl)(r.cdnProjectRoot,null===(o=e.pluginOptions.cdn)||void 0===o?void 0:o.endpoint):r.endpoint,t))}),{})})]}),[])),!1),[new se.default,new Ee.default({color:"#7979d3"})],!1),le((0,Pe.when)(he.IS_DEPLOY&&!1!==e.pluginOptions.sentry,(function(){var n,r=e.pluginOptions.sentry||{},o=null!==(n=r.authToken)&&void 0!==n?n:process.env.SENTRY_AUTH_TOKEN;return o?[(0,fe.sentryWebpackPlugin)({org:r.org||process.env.SENTRY_ORG||"elice",project:r.project||process.env.SENTRY_PROJECT||a.name,authToken:o,release:{name:"".concat(a.name,"@").concat(a.version),cleanArtifacts:!0},sourcemaps:{assets:[ge.default.join(t,"build","**/*.js"),ge.default.join(t,"build","**/*.js.map")]},silent:!1,debug:he.IS_VERBOSE})]:[]}),[])),!1),le((0,Pe.when)(he.IS_ANALYZE,(function(){return[new be.BundleAnalyzerPlugin({openAnalyzer:!0})]}),[])),!1),remove:ue([],le((0,Pe.when)(!he.IS_DEPLOY,(function(){return["HtmlWebpackPlugin"]}),[])),!1)}}})},{}),we=y&&y.__assign||function(){return we=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},we.apply(this,arguments)},je=y&&y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(De,"__esModule",{value:!0});var Me=je(a),Ae=M,Ie=N,Se=(De.default=function(e){var n,r=e.devServerConfig;return(0,Ie.merge)(r,{client:{overlay:{errors:!0,runtimeErrors:!1,warnings:!1}},static:[we({},r.static),{directory:Me.default.join(null===(n=e.context.paths)||void 0===n?void 0:n.appBuild,Ae.MODULE_FEDERATION_TYPE_EMIT_DIR),publicPath:"/".concat(Ae.MODULE_FEDERATION_TYPE_EMIT_DIR)}]})},{});Object.defineProperty(Se,"__esModule",{value:!0});var Te=N,Ne=(Se.default=function(e){var n=e.jestConfig;return(0,Te.merge)(n,{})},{}),Ce=y&&y.__assign||function(){return Ce=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},Ce.apply(this,arguments)},Fe=y&&y.__read||function(e,n){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var t,o,i=r.call(e),a=[];try{for(;(void 0===n||n-- >0)&&!(t=i.next()).done;)a.push(t.value)}catch(e){o={error:e}}finally{try{t&&!t.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Le=y&&y.__spreadArray||function(e,n,r){if(r||2===arguments.length)for(var t,o=0,i=n.length;o<i;o++)!t&&o in n||(t||(t=Array.prototype.slice.call(n,0,o)),t[o]=n[o]);return e.concat(t||Array.prototype.slice.call(n))},Re=y&&y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ne,"__esModule",{value:!0});var ke=s,Ye=Re(O),xe=h,Ue=M,qe=N;Ne.default=function(e){var n,r,t,o,i=Ce({},e.webpackConfig),a=null!==(n=e.pluginOptions.cwd)&&void 0!==n?n:process.cwd(),l=(0,qe.resolvePkgJsonProject)(a),u=(0,ke.getLoader)(i,(0,ke.loaderByName)("file-loader")).match;return(null==u?void 0:u.parent)&&(u.parent[u.index]={loader:require.resolve("file-loader"),options:{name:"static/media/[name].[sha512:hash:base62:16].[ext]"}}),(0,qe.merge)(i,{cache:{type:"filesystem",hashAlgorithm:"xxhash64"},ignoreWarnings:[function(e){var n;return[null===(n=e.details)||void 0===n?void 0:n.includes("source-map-loader")].some(Boolean)}],optimization:{minimizer:Le([],Fe((0,qe.when)(!1!==e.pluginOptions.sharp,(function(){return[new Ye.default({minimizer:{implementation:Ye.default.sharpMinify,options:{encodeOptions:{}}}})]}),[])),!1)},output:{hashFunction:"xxhash64",publicPath:(0,qe.createPublichPath)(xe.IS_DEPLOY?(0,qe.createFileChunkAssetBaseUrl)(null!==(t=null===(r=e.pluginOptions.cdn)||void 0===r?void 0:r.projectRoot)&&void 0!==t?t:l.name.replace(/^elice\-/,""),null===(o=e.pluginOptions.cdn)||void 0===o?void 0:o.endpoint):"auto")},snapshot:{},watchOptions:{ignored:["**/node_modules/**","**/".concat(Ue.MODULE_FEDERATION_TYPE_DIRNAME,"/**")]}})};!function(e){var n=y&&y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.overrideWebpackConfig=e.overrideJestConfig=e.overrideDevServerConfig=e.overrideCracoConfig=void 0;var r=j;Object.defineProperty(e,"overrideCracoConfig",{enumerable:!0,get:function(){return n(r).default}});var t=De;Object.defineProperty(e,"overrideDevServerConfig",{enumerable:!0,get:function(){return n(t).default}});var o=Se;Object.defineProperty(e,"overrideJestConfig",{enumerable:!0,get:function(){return n(o).default}});var i=Ne;Object.defineProperty(e,"overrideWebpackConfig",{enumerable:!0,get:function(){return n(i).default}})}(w);Object.defineProperty(D,"__esModule",{value:!0});D.CracoElicePlugin=void 0;var Be=w;D.CracoElicePlugin={overrideCracoConfig:Be.overrideCracoConfig,overrideDevServerConfig:Be.overrideDevServerConfig,overrideJestConfig:Be.overrideJestConfig,overrideWebpackConfig:Be.overrideWebpackConfig},function(e){var n=y&&y.__createBinding||(Object.create?function(e,n,r,t){void 0===t&&(t=r);var o=Object.getOwnPropertyDescriptor(n,r);o&&!("get"in o?!n.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(e,t,o)}:function(e,n,r,t){void 0===t&&(t=r),e[t]=n[r]}),r=y&&y.__exportStar||function(e,r){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(r,t)||n(r,e,t)};Object.defineProperty(e,"__esModule",{value:!0}),r(h,e),r(D,e),r(N,e)}(E);var Je=b(E);module.exports=Je;
